(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{3278:function(e,s,l){Promise.resolve().then(l.bind(l,2509))},2509:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return n}});var o=l(3827),t=l(4090),a=l(5240),r=l(3779);function n(){let{user:e,updateProfile:s,error:l,isLoading:n}=(0,r.useAuth)(),[i,d]=(0,t.useState)({avatar:(null==e?void 0:e.avatar)||"",phone:(null==e?void 0:e.phone)||"",location:(null==e?void 0:e.location)||"",bio:(null==e?void 0:e.bio)||"",company:(null==e?void 0:e.company)||"",position:(null==e?void 0:e.position)||"",experience:(null==e?void 0:e.experience)||0,specialties:(null==e?void 0:e.specialties)||"",achievements:(null==e?void 0:e.achievements)||"",education:(null==e?void 0:e.education)||"",skills:(null==e?void 0:e.skills)||"",workHistory:(null==e?void 0:e.workHistory)||"",expectedSalary:(null==e?void 0:e.expectedSalary)||0,jobPreferences:(null==e?void 0:e.jobPreferences)||"",wechat:(null==e?void 0:e.wechat)||"",linkedin:(null==e?void 0:e.linkedin)||"",website:(null==e?void 0:e.website)||""});(0,t.useEffect)(()=>{e&&d({avatar:e.avatar||"",phone:e.phone||"",location:e.location||"",bio:e.bio||"",company:e.company||"",position:e.position||"",experience:e.experience||0,specialties:e.specialties||"",achievements:e.achievements||"",education:e.education||"",skills:e.skills||"",workHistory:e.workHistory||"",expectedSalary:e.expectedSalary||0,jobPreferences:e.jobPreferences||"",wechat:e.wechat||"",linkedin:e.linkedin||"",website:e.website||""})},[e]);let c=async e=>{e.preventDefault();try{await s(i)}catch(e){console.error("更新用户资料失败:",e)}},m=e=>{let{name:s,value:l,type:o}=e.target;d(e=>({...e,[s]:"number"===o?Number(l):l}))};return e?(0,o.jsx)(a.default,{children:(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,o.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,o.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,o.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"个人资料"}),(0,o.jsx)("div",{className:"mt-2 max-w-xl text-sm text-gray-500",children:(0,o.jsx)("p",{children:"更新您的个人资料信息。"})}),(0,o.jsxs)("form",{onSubmit:c,className:"mt-5 space-y-6",children:[l&&(0,o.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,o.jsx)("div",{className:"text-sm text-red-700",children:l})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"avatar",className:"block text-sm font-medium text-gray-700",children:"头像 URL"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"text",name:"avatar",id:"avatar",value:i.avatar,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"手机号码"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"tel",name:"phone",id:"phone",value:i.phone,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"所在地"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"text",name:"location",id:"location",value:i.location,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700",children:"个人简介"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("textarea",{name:"bio",id:"bio",rows:3,value:i.bio,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),"headhunter"===e.userType&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700",children:"公司名称"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"text",name:"company",id:"company",value:i.company,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700",children:"职位"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"text",name:"position",id:"position",value:i.position,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"experience",className:"block text-sm font-medium text-gray-700",children:"从业年限"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"number",name:"experience",id:"experience",value:i.experience,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"specialties",className:"block text-sm font-medium text-gray-700",children:"专长领域"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"text",name:"specialties",id:"specialties",value:i.specialties,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"achievements",className:"block text-sm font-medium text-gray-700",children:"成就"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("textarea",{name:"achievements",id:"achievements",rows:3,value:i.achievements,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]})]}),"candidate"===e.userType&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"education",className:"block text-sm font-medium text-gray-700",children:"教育背景"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("textarea",{name:"education",id:"education",rows:3,value:i.education,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"skills",className:"block text-sm font-medium text-gray-700",children:"技能"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("textarea",{name:"skills",id:"skills",rows:3,value:i.skills,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"workHistory",className:"block text-sm font-medium text-gray-700",children:"工作经历"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("textarea",{name:"workHistory",id:"workHistory",rows:3,value:i.workHistory,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"expectedSalary",className:"block text-sm font-medium text-gray-700",children:"期望薪资"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"number",name:"expectedSalary",id:"expectedSalary",value:i.expectedSalary,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"jobPreferences",className:"block text-sm font-medium text-gray-700",children:"求职偏好"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("textarea",{name:"jobPreferences",id:"jobPreferences",rows:3,value:i.jobPreferences,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"wechat",className:"block text-sm font-medium text-gray-700",children:"微信号"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"text",name:"wechat",id:"wechat",value:i.wechat,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"linkedin",className:"block text-sm font-medium text-gray-700",children:"LinkedIn 链接"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"url",name:"linkedin",id:"linkedin",value:i.linkedin,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700",children:"个人网站"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{type:"url",name:"website",id:"website",value:i.website,onChange:m,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"submit",disabled:n,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"保存中...":"保存"})})]})]})})})})})}):null}},3779:function(e,s,l){"use strict";l.r(s),l.d(s,{AuthProvider:function(){return r},useAuth:function(){return n}});var o=l(3827),t=l(4090);let a=(0,t.createContext)(void 0);function r(e){let{children:s}=e,[l,r]=(0,t.useState)({user:null,isAuthenticated:!1,isLoading:!0,error:null});(0,t.useEffect)(()=>{r(e=>({...e,isLoading:!1}))},[]);let n=async e=>{try{r(e=>({...e,isLoading:!0,error:null})),console.log("开始登录请求");let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("登录响应状态:",s.status),!s.ok){let e=await s.json();throw Error(e.message||"登录失败")}let l=await s.json();console.log("登录成功:",l),r(e=>({...e,user:l.user,isAuthenticated:!0,isLoading:!1}))}catch(e){throw console.error("登录错误:",e),r(s=>({...s,error:e instanceof Error?e.message:"登录失败",isLoading:!1})),e}},i=async e=>{try{r(e=>({...e,isLoading:!0,error:null})),console.log("开始注册请求");let s=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("注册响应状态:",s.status),!s.ok){let e=await s.json();throw Error(e.message||"注册失败")}let l=await s.json();console.log("注册成功:",l),r(e=>({...e,user:l.user,isAuthenticated:!0,isLoading:!1}))}catch(e){throw console.error("注册错误:",e),r(s=>({...s,error:e instanceof Error?e.message:"注册失败",isLoading:!1})),e}},d=async()=>{try{r(e=>({...e,isLoading:!0,error:null})),console.log("开始登出请求");let e=await fetch("/api/auth/logout",{method:"POST"});if(console.log("登出响应状态:",e.status),!e.ok)throw Error("登出失败");r({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(e){throw console.error("登出错误:",e),r(s=>({...s,error:e instanceof Error?e.message:"登出失败",isLoading:!1})),e}},c=async e=>{try{r(e=>({...e,isLoading:!0,error:null})),console.log("开始更新用户资料");let s=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("更新用户资料响应状态:",s.status),!s.ok){let e=await s.json();throw Error(e.message||"更新用户资料失败")}let l=await s.json();console.log("更新用户资料成功:",l),r(e=>({...e,user:l,isLoading:!1}))}catch(e){throw console.error("更新用户资料错误:",e),r(s=>({...s,error:e instanceof Error?e.message:"更新用户资料失败",isLoading:!1})),e}};return(0,o.jsx)(a.Provider,{value:{...l,login:n,signup:i,logout:d,updateProfile:c},children:s})}function n(){let e=(0,t.useContext)(a);if(void 0===e)throw Error("useAuth 必须在 AuthProvider 内部使用");return e}}},function(e){e.O(0,[901,240,971,69,744],function(){return e(e.s=3278)}),_N_E=e.O()}]);