(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{4037:function(e,s,r){Promise.resolve().then(r.bind(r,5999))},5999:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var o=r(3827),t=r(4090),a=r(8792),l=r(7907),n=r(5240),i=r(3779);function d(){let e=(0,l.useRouter)(),{signup:s,error:r,isLoading:d}=(0,i.useAuth)(),[c,u]=(0,t.useState)({name:"",email:"",password:"",confirmPassword:"",userType:"headhunter",agreeToTerms:!1}),m=async r=>{r.preventDefault();try{await s(c),e.push("/dashboard")}catch(e){console.error("注册失败:",e)}},h=e=>{let{name:s,value:r}=e.target;u(e=>({...e,[s]:r}))};return(0,o.jsx)(n.Z,{children:(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,o.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,o.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"创建新账号"}),(0,o.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["或者"," ",(0,o.jsx)(a.default,{href:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"登录已有账号"})]})]}),(0,o.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,o.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,o.jsxs)("form",{className:"space-y-6",onSubmit:m,children:[r&&(0,o.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,o.jsx)("div",{className:"text-sm text-red-700",children:r})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"姓名"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:c.name,onChange:h,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"电子邮箱"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c.email,onChange:h,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"密码"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:c.password,onChange:h,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"确认密码"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:c.confirmPassword,onChange:h,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"userType",className:"block text-sm font-medium text-gray-700",children:"用户类型"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsxs)("select",{id:"userType",name:"userType",required:!0,value:c.userType,onChange:h,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,o.jsx)("option",{value:"headhunter",children:"猎头"}),(0,o.jsx)("option",{value:"candidate",children:"求职者"})]})})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{id:"agreeToTerms",name:"agreeToTerms",type:"checkbox",required:!0,checked:c.agreeToTerms,onChange:h,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsxs)("label",{htmlFor:"agreeToTerms",className:"ml-2 block text-sm text-gray-900",children:["我已阅读并同意"," ",(0,o.jsx)(a.default,{href:"/terms",className:"font-medium text-blue-600 hover:text-blue-500",children:"服务条款"})," ","和"," ",(0,o.jsx)(a.default,{href:"/privacy",className:"font-medium text-blue-600 hover:text-blue-500",children:"隐私政策"})]})]}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"注册中...":"注册"})})]}),(0,o.jsxs)("div",{className:"mt-6",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,o.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,o.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,o.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"或者使用"})})]}),(0,o.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,o.jsx)("span",{className:"sr-only",children:"使用微信注册"}),(0,o.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M8.5,13.5A1.5,1.5 0 0,1 7,12A1.5,1.5 0 0,1 8.5,10.5A1.5,1.5 0 0,1 10,12A1.5,1.5 0 0,1 8.5,13.5M15.5,13.5A1.5,1.5 0 0,1 14,12A1.5,1.5 0 0,1 15.5,10.5A1.5,1.5 0 0,1 17,12A1.5,1.5 0 0,1 15.5,13.5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4Z"})})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("button",{type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,o.jsx)("span",{className:"sr-only",children:"使用领英注册"}),(0,o.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z"})})]})})]})]})]})})]})})}},3779:function(e,s,r){"use strict";r.r(s),r.d(s,{AuthProvider:function(){return l},useAuth:function(){return n}});var o=r(3827),t=r(4090);let a=(0,t.createContext)(void 0);function l(e){let{children:s}=e,[r,l]=(0,t.useState)({user:null,isAuthenticated:!1,isLoading:!0,error:null});(0,t.useEffect)(()=>{l(e=>({...e,isLoading:!1}))},[]);let n=async e=>{try{l(e=>({...e,isLoading:!0,error:null})),console.log("开始登录请求");let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("登录响应状态:",s.status),!s.ok){let e=await s.json();throw Error(e.message||"登录失败")}let r=await s.json();console.log("登录成功:",r),l(e=>({...e,user:r.user,isAuthenticated:!0,isLoading:!1}))}catch(e){throw console.error("登录错误:",e),l(s=>({...s,error:e instanceof Error?e.message:"登录失败",isLoading:!1})),e}},i=async e=>{try{l(e=>({...e,isLoading:!0,error:null})),console.log("开始注册请求");let s=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("注册响应状态:",s.status),!s.ok){let e=await s.json();throw Error(e.message||"注册失败")}let r=await s.json();console.log("注册成功:",r),l(e=>({...e,user:r.user,isAuthenticated:!0,isLoading:!1}))}catch(e){throw console.error("注册错误:",e),l(s=>({...s,error:e instanceof Error?e.message:"注册失败",isLoading:!1})),e}},d=async()=>{try{l(e=>({...e,isLoading:!0,error:null})),console.log("开始登出请求");let e=await fetch("/api/auth/logout",{method:"POST"});if(console.log("登出响应状态:",e.status),!e.ok)throw Error("登出失败");l({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(e){throw console.error("登出错误:",e),l(s=>({...s,error:e instanceof Error?e.message:"登出失败",isLoading:!1})),e}},c=async e=>{try{l(e=>({...e,isLoading:!0,error:null})),console.log("开始更新用户资料");let s=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("更新用户资料响应状态:",s.status),!s.ok){let e=await s.json();throw Error(e.message||"更新用户资料失败")}let r=await s.json();console.log("更新用户资料成功:",r),l(e=>({...e,user:r,isLoading:!1}))}catch(e){throw console.error("更新用户资料错误:",e),l(s=>({...s,error:e instanceof Error?e.message:"更新用户资料失败",isLoading:!1})),e}};return(0,o.jsx)(a.Provider,{value:{...r,login:n,signup:i,logout:d,updateProfile:c},children:s})}function n(){let e=(0,t.useContext)(a);if(void 0===e)throw Error("useAuth 必须在 AuthProvider 内部使用");return e}}},function(e){e.O(0,[901,240,971,69,744],function(){return e(e.s=4037)}),_N_E=e.O()}]);